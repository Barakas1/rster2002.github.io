<!DOCTYPE html>

<html>
	<head>
		<title id="title">dev | project | skulls</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="icon" href="../assets/logo_black.png">
		<link rel="stylesheet" media="screen and (min-device-width: 800px)" href="../assets/css/versions.css">
		<link rel="stylesheet" media="screen and (max-device-width: 800px)" href="../assets/css/versions.m.css">
		<style>
			.header h1 {
				background-image: -webkit-linear-gradient(92deg,rgb(0, 160, 160),rgb(0, 200, 200));
			}
		</style>
		<script src="../assets/js/versions.js"></script>
	</head>
	<body>
		<div class="header" id="header">
			<h1 id="header-title">test</h1>
		</div>
		<button onclick="downloadLatest()" style="margin-top:50px;">download latest</button>
		<div class="changelog">
			<ul id="changes">
			</ul>
		</div>
		<button onclick="change()" id="blue">Change view</button>
		<div class="versions" id="versions">
		</div>
		<div id="allChanges">
		</div>
		<script id="list"></script>
		<script>
			function openPrj(name, header) {
				sessionStorage.setItem("prjName",name);
				sessionStorage.setItem("header",header);
			}
			
			var urlParam = function(name, w) {
				w = w || window;
				var rx = new RegExp('[\&|\?]'+name+'=([^\&\#]+)'),
				val = w.location.search.match(rx);
				return !val ? '':val[1];
			}

			if (urlParam("prj") !== '') {
				var prjName = urlParam("prj");
				switch (prjName) {
					case 'mirror':
						openPrj('Mirror',"../assets/images/mirror.png");
						break;
					case 'minetoon':
						openPrj('minetoon',"../assets/images/minetoon.png");
						break;
					case 'skulls':
						openPrj('Skulls',false);
						break;
				}
			}
			
			n = sessionStorage.getItem("prjName");
			sessionStorage.setItem("pro_name", n);
			
			function downloadLatest() {
				location.href="projects/versions/" + n + "%20" + localStorage.getItem("latest") + ".zip";
			}
			
			if (sessionStorage.getItem("header") !== "false") {
				var header = sessionStorage.getItem("header");
				document.getElementById("header").setAttribute("style","background-image: url(" + header + ");background-size: cover;background-attachment: fixed;background-position: 70% 160%;")
			}
			
			document.getElementById("title").innerHTML = "dev | projects | " + n;
			document.getElementById("header-title").innerHTML = n;
			document.getElementById("list").src = "projects/" + n + ".js"
		</script>
	</body>
</html>